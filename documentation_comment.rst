=====================
ドキュメントコメント
=====================

----
参考
----

* コードのドキュメント付け  http://www.doxygen.jp/docblocks.html
* Doxygen 書き方メモ (C, C++) http://qiita.com/inabe49/items/23e615649e8539d857a8

-----
目的
-----
プログラムの構成や各関数の用途・使い方などをドキュメント化するのは、将来の自分が忘れないために、
また、プロジェクトを引き継いだり新たに参加した人が円滑に開発できるようにするために重要。

しかし、逐一手作業で全ての関数・モジュールの説明をドキュメント化するのは工数がかかり、コードとの同期も困難。

そこで、ソースファイルからドキュメントを自動生成するのに `Doxygen`_ を使用する。
ファイルヘッダ・関数・構造体・列挙体・グローバル変数に下記のフォーマットに従って
ドキュメントコメントを記述することで、自動的にドキュメントを生成することができる。

-------------------------------
ドキュメントコメントの記述書式
-------------------------------

以下のように ``/**`` で始まり、 ``*/`` で終わるコメントブロックを使用する。

.. code-block:: c

   /**
    * ここにテキストを書く
    */

1行 で記述する場合は

.. code-block:: c

   /** ここにテキストを書く */

とする。

コーディング規約では、コメントアウトは ``//`` で行なうことになっているが、
通常のコメントと見分けやすいよう、 ``/** */`` によりドキュメントコメントを記述すること。

ドキュメントコメント自体をコメントアウトする場合は ``//`` を使用すること。

--------------------------------
ヘッダに書くか、ソースに書くか
--------------------------------

外部に公開する関数や型は一般的にヘッダファイルに記述する。
モジュールの使い方を調べるときは、ヘッダファイルを見ることが多いため
ヘッダファイルに記述してあるもののドキュメントコメントは、ヘッダファイル側に書くこととする。
それ以外はソースファイルに記述する。
ソースファイル内に静的関数がある場合、そのプロトタイプ宣言にドキュメントコメントを記述する。

------------------------------------
ファイル先頭のドキュメントコメント
------------------------------------

.. code-block:: c

   /**
    * @file
    * 要約説明
    * 
    * 詳細説明
    */

---------------------------------------
関数へのドキュメントコメント (詳細版)
---------------------------------------

.. code-block:: c

   /**
    * 要約説明
    *
    * 詳細説明
    */
    void func1(void);

---------------------------------------
関数へのドキュメントコメント (詳細版)
---------------------------------------

.. code-block:: c

   /**
    * @brief 要約説明
    * @param [引数名] 引数の説明
    * @param [引数名] 引数の説明
    * @return 戻り値の説明
    * @sa 参照すべき関数を書けばリンクが貼れる
    * @detail 詳細な説明
    */
    void func1(int arg1, int arg2);

------------------------------
変数へのドキュメントコメント
------------------------------

.. code-block:: c

   int Value = 0; /**< 変数の説明 */

---------------------------------
マクロへのドキュメントコメント
---------------------------------

.. code-block:: c

   #define MAX_VALUE 256 /**< マクロの説明 */

--------------------------------------
関数型マクロへのドキュメントコメント
--------------------------------------

.. code-block:: c

   #define HALF_OF(VAL) (VAL/2) /**< マクロの説明 */

--------------------------------
列挙体へのドキュメントコメント
--------------------------------

.. code-block:: c

   /**
    * 要約説明
    *
    * 詳細説明
    */
   enum Direction {
       Direction_Norh,  /**< 北 */
       Direction_East,  /**< 東 */
       Direction_South, /**< 南 */
       Direction_West,  /**< 西 */
   };

-------------------------------
構造体へのドキュメントコメント
-------------------------------

.. code-block:: c

   /**
    * 要約説明
    *
    * 詳細説明
    */
    typedef struct {
        Sex sex;       /**< 性別 */
        Date birthday; /**< 誕生日 */
        float tall;    /**< 身長(メートル) */
        float weight;  /**< 体重(キログラム) */
    } Human;


その他の要素へのドキュメントコメントの書きかたは http://www.doxygen.jp/commands.html を参照。

.. _Doxygen: http://www.doxygen.jp/
